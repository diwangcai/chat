(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{63:(e,t,s)=>{"use strict";var l=s(7260);s.o(l,"useRouter")&&s.d(t,{useRouter:function(){return l.useRouter}})},181:(e,t,s)=>{"use strict";s.d(t,{HW:()=>c,a1:()=>d,lo:()=>a,lt:()=>i});let l="chat:users",r="chat:user";function a(){try{return JSON.parse(localStorage.getItem(l)||"[]")}catch(e){return[]}}function n(e){localStorage.setItem(l,JSON.stringify(e))}function c(){try{return JSON.parse(localStorage.getItem(r)||"null")}catch(e){return null}}function i(e){localStorage.setItem(r,JSON.stringify(e));let t=a(),s=t.findIndex(t=>t.id===e.id);s>=0?t[s]=e:t.push(e),n(t)}function d(e){n(a().filter(t=>t.id!==e));let t=c();(null==t?void 0:t.id)===e&&localStorage.removeItem(r)}},5067:(e,t,s)=>{Promise.resolve().then(s.bind(s,5782))},5782:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var l=s(5155),r=s(2115),a=s(181),n=s(63);function c(){let e=(0,n.useRouter)(),[t,s]=(0,r.useState)(()=>(0,a.lo)());(0,r.useMemo)(()=>(0,a.HW)(),[]),(0,r.useEffect)(()=>{let t=(0,a.HW)();(null==t?void 0:t.isAdmin)||e.replace("/login")},[e]);let c=()=>s((0,a.lo)());return(0,l.jsxs)("div",{className:"max-w-3xl mx-auto p-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("h1",{className:"text-2xl font-semibold",children:"用户管理"}),(0,l.jsx)("button",{className:"btn-secondary",onClick:c,children:"刷新"})]}),(0,l.jsx)("div",{className:"overflow-hidden rounded-xl border",style:{borderColor:"var(--border)"},children:(0,l.jsxs)("table",{className:"w-full text-sm",children:[(0,l.jsx)("thead",{className:"bg-gray-50",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"text-left p-3",children:"ID"}),(0,l.jsx)("th",{className:"text-left p-3",children:"昵称"}),(0,l.jsx)("th",{className:"text-left p-3",children:"角色"}),(0,l.jsx)("th",{className:"text-left p-3",children:"注册时间"}),(0,l.jsx)("th",{className:"text-right p-3",children:"操作"})]})}),(0,l.jsxs)("tbody",{children:[t.map(t=>(0,l.jsxs)("tr",{className:"border-t",style:{borderColor:"var(--border)"},children:[(0,l.jsx)("td",{className:"p-3",children:t.id}),(0,l.jsx)("td",{className:"p-3",children:t.name}),(0,l.jsx)("td",{className:"p-3",children:t.isAdmin?"管理员":"普通用户"}),(0,l.jsx)("td",{className:"p-3",children:new Date(t.createdAt).toLocaleString()}),(0,l.jsxs)("td",{className:"p-3 text-right space-x-2",children:[(0,l.jsx)("button",{className:"btn-secondary",onClick:()=>{(0,a.lt)(t),e.push("/")},children:"模拟登录"}),(0,l.jsx)("button",{className:"btn-primary",onClick:()=>{let e={...t,isAdmin:!t.isAdmin};localStorage.setItem("chat:users",JSON.stringify((0,a.lo)().map(s=>s.id===t.id?e:s))),c()},children:t.isAdmin?"降级":"升级为管理员"}),(0,l.jsx)("button",{className:"btn-secondary",onClick:()=>{(0,a.a1)(t.id),c()},children:"删除"})]})]},t.id)),0===t.length&&(0,l.jsx)("tr",{children:(0,l.jsx)("td",{className:"p-6 text-center text-gray-500",colSpan:5,children:"暂无用户"})})]})]})})]})}}},e=>{e.O(0,[441,493,358],()=>e(e.s=5067)),_N_E=e.O()}]);